<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title></title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://unpkg.com/masonry-layout@4/dist/masonry.pkgd.min.js"></script>
    <style media="screen">
    *{ margin: 0; padding: 0; }
    .box {
      background: black;
      margin: 5px;
    }
    </style>
    <script type="text/javascript">
      $(document).ready(function() {
        for (var i = 0; i < 50; i++) {
          var height = Math.floor(Math.random() * 100) + 50;
          var url = 'http://placekitten.com/100/' + height
          $('<div><img src="' + url + '" alt="image"></img></div>').addClass('box').css({
            width: 100,
            height: height
          }).appendTo('body');
        }

        $('body').masonry({
          columnWidth: 110
        });

        $(window).scroll(function() {
          if ($(window).height() + $(window).scrollTop() + 10 >
          $(document).height()) {
            var items = [];
            for (var i = 0; i < 50; i++) {
              var height = Math.floor(Math.random() * 100) + 50;
              var url = 'http://placekitten.com/100/' + height
              var $item = $('<div><img src="' + url + '" alt="image"></img></div>')
              .addClass('box').css({
                width: 100,
                height: height
              });
              $item.appendTo('body');
              items.push($item.get(0));
              // $('body').masonry('appended', $item);
            }
            console.log(items);
            $('body').masonry('appended', items);
          }
        });
      });
    </script>

  </head>
  <body>
  </body>
</html>
